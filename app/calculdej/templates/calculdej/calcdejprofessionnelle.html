{% extends "baseActivite.html" %}

{% load crispy_forms_tags %}
{% block title %}DEJAppli - Ma DEJ{% endblock %}
{% block header %}<h1>Activit√©s Professionnelles</h1>{% endblock %}

{% block form %}


<!-- {{ formDej|crispy }} -->
<!-- {{ formDeplacement|crispy }} -->


<div class="container">

<form id="calcForm" method="post"
 data-act-url="{% url 'load_act' %}" class="form-inline">
<div>
  {% csrf_token %}
  {% for field in formDej %}
    <div class="form-group has-feedback">
      {{ field }}
    </div>
  {% endfor %}
</div>

<div id="myDIV" style="display: none" class="row">
  </br>
  <p> Remplissez les champs suivants </p>
  {% for field in formDeplacement %}
  <label> {{ field.label }}</label>
  <div>
    {{ field }}
  </div></br>
  {% endfor %}
</div>

</div>

<div class="container info-form">
  <p> vous deplacez-vous au travail ?
  <input type="radio" id="btn1" name="rdouinon" checked="checked" onclick="myFunctionNon()" value="Non"/> Non
  <input type="radio" id="btn1" name="rdouinon" onclick="myFunctionOui()" value="Oui"/> Oui
  </p>

</div>

<div class="container">
  <input id="btnSuivant" class="btn btn-default" type="submit" name="btnsuivant" value="Suivant">
</div>

</form>

{% endblock %}

{% block footer %}

<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script>
    $("#id_cat").change(function () {
      var url = $("#calcForm").attr("data-act-url");  // get the url of the `load_cities` view
      var cat_select = $(this).val();  // get the selected country ID from the HTML input
      // alert(cat_sls$elect);
      $.ajax({                       // initialize an AJAX request
        url: url,                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
        data: {
          'cat': cat_select       // add the country id to the GET parameters
        },
        success: function (data) {   // `data` is the return of the `load_cities` view function
          // acts = activites.filter(categorie=cat)
          $("#id_act").html(data);  // replace the contents of the city input with the data that came from the server
        }
      });

    });
  </script>

  <script type="text/javascript">
  function myFunctionNon() {
    var x = document.getElementById("myDIV");
    if (x.style.display === "block") {
      x.style.display = "none";
    }
  }

  function myFunctionOui() {
    var x = document.getElementById("myDIV");
    if (x.style.display === "none") {
      x.style.display = "block";
    }

  }
  </script>

<!-- <a class="btn btn-default" href="{% url 'calculdejusuelle' %}" role="button" name="asuivant">Suivant</a> -->
<!-- <form method="post">
  {% csrf_token %}
  <input id="btnSuivant" class="btn btn-default" type="submit" name="btnsuivant" value="Suivant">
</form> -->
{% endblock %}
